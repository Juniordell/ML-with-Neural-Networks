const net = new brain.NeuralNetwork()

const data = [{"input":{"r":0,"g":0,"b":0},"output":[1]},
{"input":{"r":1,"g":1,"b":1},"output":[0]},
{"input":{"r":0.7481397905561693,"g":0.31662991041153243,"b":0.06154643059068232},"output":[1]},
{"input":{"r":0.8814485964423662,"g":0.8520397192190632,"b":0.6067108665167902},"output":[0]},
{"input":{"r":0.8082091285192141,"g":0.8960128653973229,"b":0.27787499718595643},"output":[0]},
{"input":{"r":0.6990952569548246,"g":0.33341355647977955,"b":0.36641809082470767},"output":[1]},
{"input":{"r":0.4798414047143249,"g":0.8021891015944349,"b":0.5004310866765611},"output":[0]},
{"input":{"r":0.12450746569014082,"g":0.6231715680543968,"b":0.47492587275957976},"output":[1]},
{"input":{"r":0.07554625966097483,"g":0.610653157610987,"b":0.9343415946722855},"output":[1]},
{"input":{"r":0.039981660139832176,"g":0.20808575315521027,"b":0.16051388831380664},"output":[1]},
{"input":{"r":0.7609367215170129,"g":0.7860019369633593,"b":0.19513287863796513},"output":[0]},
{"input":{"r":0.8177871897817826,"g":0.384087385139134,"b":0.9989430069471035},"output":[0]},
{"input":{"r":0.9347049531673668,"g":0.03758908502106828,"b":0.1541697688525845},"output":[1]},
{"input":{"r":0.42288783316812073,"g":0.7686474993606367,"b":0.8416833281456708},"output":[1]},
{"input":{"r":0.9337705358430521,"g":0.051008010977706464,"b":0.4165093342988051},"output":[1]},
{"input":{"r":0.2008463539025207,"g":0.7317181688763168,"b":0.515274410983759},"output":[1]},
{"input":{"r":0.6345713859404796,"g":0.5319555596005228,"b":0.022214911853646324},"output":[1]},
{"input":{"r":0.10628838404259167,"g":0.7170182061760884,"b":0.6009868631975221},"output":[0]},
{"input":{"r":0.1895311917262732,"g":0.5877334581757807,"b":0.11214408011713828},"output":[1]},
{"input":{"r":0.3502546341238044,"g":0.6098677931574483,"b":0.40291662639341785},"output":[1]},
{"input":{"r":0.3539222039382264,"g":0.17047716216499165,"b":0.9811405586424293},"output":[1]},
{"input":{"r":0.36698443325208774,"g":0.5489069420651669,"b":0.9417737873443852},"output":[1]},
{"input":{"r":0.8953449244878713,"g":0.392177991700988,"b":0.4913853391112226},"output":[1]},
{"input":{"r":0.5534142945001077,"g":0.3769862134462434,"b":0.2509908291653875},"output":[1]},
{"input":{"r":0.5156101748540556,"g":0.4909362485968145,"b":0.9083575116685063},"output":[1]},
{"input":{"r":0.346286392540736,"g":0.5276736278208449,"b":0.281613062899873},"output":[1]},
{"input":{"r":0.17739664130919452,"g":0.46234346327037534,"b":0.13201755052104547},"output":[1]},
{"input":{"r":0.7649709676675955,"g":0.685303724106493,"b":0.7503106206156542},"output":[0]},
{"input":{"r":0.7485331077980524,"g":0.7503696380072171,"b":0.12277548057669141},"output":[0]},
{"input":{"r":0.19236444601969427,"g":0.7229420651025369,"b":0.4462802382538429},"output":[0]},
{"input":{"r":0.8366853134297643,"g":0.7596214294766752,"b":0.21047855990474762},"output":[0]},
{"input":{"r":0.4584032906258264,"g":0.9558984879657004,"b":0.1501224821004563},"output":[0]},
{"input":{"r":0.032920581621034284,"g":0.8447023584693061,"b":0.7837706920514083},"output":[0]},
{"input":{"r":0.567226231882036,"g":0.8448985227658372,"b":0.31822003053095727},"output":[0]},
{"input":{"r":0.6495980245268944,"g":0.08739183908235826,"b":0.49139986088169985},"output":[1]},
{"input":{"r":0.30139781848165903,"g":0.47687879714188686,"b":0.30012231874588946},"output":[1]},
{"input":{"r":0.8139475465844501,"g":0.15248104720873967,"b":0.9021120153602824},"output":[1]},
{"input":{"r":0.6990550100109334,"g":0.18535893944147186,"b":0.6437146930490532},"output":[1]},
{"input":{"r":0.6185996634396485,"g":0.17540658565416645,"b":0.1306205484070122},"output":[1]},
{"input":{"r":0.8592179819872312,"g":0.5943718647972751,"b":0.4859164452574032},"output":[0]},
{"input":{"r":0.03286110430079159,"g":0.168419524592766,"b":0.8874288501002021},"output":[1]},
{"input":{"r":0.6728948822450449,"g":0.6504040853698783,"b":0.1504184213770261},"output":[0]},
{"input":{"r":0.6662874420010483,"g":0.582030665565427,"b":0.8495643022819388},"output":[1]},
{"input":{"r":0.248046451708688,"g":0.47022099717815347,"b":0.4599975584385032},"output":[1]},
{"input":{"r":0.6043712604334013,"g":0.9791675907631043,"b":0.20948306736357547},"output":[0]},
{"input":{"r":0.00847122684598789,"g":0.9905305849842376,"b":0.7815478107290339},"output":[0]},
{"input":{"r":0.6474616007198801,"g":0.13593093265063105,"b":0.9151160033818322},"output":[1]},
{"input":{"r":0.8166449188840093,"g":0.6447535298141407,"b":0.10180871843691341},"output":[1]},
{"input":{"r":0.3213461550718768,"g":0.3374556443609791,"b":0.1571771111848912},"output":[1]},
{"input":{"r":0.5923393862250248,"g":0.9485466840213019,"b":0.25224949693648213},"output":[0]},
{"input":{"r":0.1074690417223585,"g":0.18148618442812725,"b":0.7969496221959298},"output":[1]},
{"input":{"r":0.8981562888309333,"g":0.8784516793881538,"b":0.7918374313639924},"output":[0]},
{"input":{"r":0.5652529871505321,"g":0.6809662526108022,"b":0.5157881653522671},"output":[0]},
{"input":{"r":0.6541826190112554,"g":0.10356417016201314,"b":0.31151711301281493},"output":[1]},
{"input":{"r":0.1358498893598603,"g":0.43339693711408045,"b":0.5879099195398207},"output":[1]},
{"input":{"r":0.7497883175965763,"g":0.3001010891168461,"b":0.011535161092539603},"output":[1]},
{"input":{"r":0.5522473767644678,"g":0.15833945903303537,"b":0.17908639097040524},"output":[1]}]

net.train(data)

const colorEl = document.getElementById('color')
const guessEl = document.getElementById('guess')
const whiteButton = document.getElementById('white-button')
const blackButton = document.getElementById('black-button')
const printButton = document.getElementById('print-button')

let color
setRandomColor()

whiteButton.addEventListener('click', () => {
    chooseColor(1)
})

blackButton.addEventListener('click', () => {
    chooseColor(0)
})

printButton.addEventListener('click', print)

function chooseColor(value) {
    data.push({
        input: color,
        output: [value]
    })
    setRandomColor()
}

function print() {
    console.log(JSON.stringify(data))
}

function setRandomColor() {
    color = {
        r: Math.random(),
        g: Math.random(),
        b: Math.random()
    }
    const guess = net.run(color)[0]

    guessEl.style.color = guess > .5 ? 'white' : 'black'
    colorEl.style.backgroundColor = 
        `rgb(${color.r * 255}, ${color.g * 255}, ${color.b * 255})`
}
